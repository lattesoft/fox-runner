<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .fox-eyes{
            background-image: url(images/fox-eyes.png);
            animation: moveEye 1s steps(2) infinite;
        }

        .fox-standing{
            background-image: url(images/fox-standing.png);
            animation: moveStand 1s steps(6) infinite;
        }

        .fox-running{
            background-image: url(images/fox-running.png);
            animation: moveRun 1s steps(8) infinite;
        }

        @keyframes moveEye{
            from{background-position-x: 0px;}
            to{background-position-x: -434px;}
        }

        @keyframes moveStand{
            from{background-position-x: 0px;}
            to{background-position-x: -1301px;}
        }

        @keyframes moveRun{
            from{background-position-x: -216.88px;}
            to{background-position-x: -1952px;}
        }

        body{
            margin: 0;
            padding: 0;
        }

        .fox-object{
            width: 218px;
            height: 204px;
            position: absolute;
            left: 25%;
            bottom: 20px;
            transition: bottom .6s ease-in;
        }

        .backgroud{
            background-image: url(images/backgroud.png);
            height: 500px;
            width: 100%;
            position: relative;
        }

        .backgroud-running{
            animation: moveBackgroud 5s linear infinite;
        }

        @keyframes moveBackgroud{
            from{background-position-x: 0px;}
            to{background-position-x: -873px;}
        }

        .barrier-object{
            position: absolute;
            bottom: 20px;
            width: 50px;
        }
    </style>
</head>
<body>
    <div id="backgroud" class="backgroud">
        <div id="foxObject" class="fox-object fox-standing">
        </div>
    </div>
    <script type="text/javascript">
        var status = "standing";
        var backgroud = document.getElementById("backgroud");
        var foxObject = document.getElementById("foxObject");


        document.addEventListener ('keydown', (e) => {
            switch(status){
                    case "standing": {
                        status = "running";
                        backgroud.classList.add("backgroud-running");
                        foxObject.classList.remove("fox-standing");
                        foxObject.classList.add("fox-running");
                        ramdomObject();
                        break;
                    }
                    case "running": {
                        foxObject.style.bottom="150px";
                        status = "jumping";
                        setTimeout(function(){
                            foxObject.style.bottom="20px";
                            setTimeout(function(){
                                status = "running";
                            },700);
                        },700);
                        break;
                    }
                }
        } );

        function random(from, to){
            return Math.floor(Math.random() * to) + from;
        }

        function moveObject(objectNumber){
            var moveObject = setInterval(function(){
                var element = document.querySelector('#objectNumber'+objectNumber)
                
                var leftValue = getComputedStyle(element).left.replace("px","");
                leftValue = leftValue-1;
                document.getElementById("objectNumber"+objectNumber).style.left = (leftValue)+"px";
                if(leftValue <= -100){
                    document.getElementById("objectNumber"+objectNumber).remove();
                    clearInterval(moveObject);
                }
            },5.5);
        }

        var objectNumber = 0;
        function ramdomObject(){
            let createObject = setTimeout(function(){
                objectNumber++;
                
                let ele = document.getElementById("backgroud");

                console.log(objectNumber);
                let imgNode = document.createElement ('img');
                ele.appendChild (imgNode);
                imgNode.setAttribute (
                    "id",
                    "objectNumber"+objectNumber
                );
                imgNode.setAttribute (
                    "class",
                    "barrier-object"
                );
                imgNode.setAttribute (
                    "src",
                    'images/objects/object'+random(1,11)+'.png'
                );
                imgNode.setAttribute (
                    "style",
                    "left: 100%"
                );

                moveObject(objectNumber);
                ramdomObject();
            },random(1500, 3000));
        }

    </script>
</body>
</html>